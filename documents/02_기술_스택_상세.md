# 02. Sensor Game Hub - ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸

> **ì‘ì„±ì¼**: 2025-01-10
> **ë²„ì „**: v6.1.0
> **ëª©ì **: ë©´ì ‘ìš© ê¸°ìˆ  ìŠ¤íƒ ì™„ì „ ë¶„ì„

---

## ğŸ“‹ ëª©ì°¨

1. [ê¸°ìˆ  ìŠ¤íƒ ê°œìš”](#1-ê¸°ìˆ -ìŠ¤íƒ-ê°œìš”)
2. [ë°±ì—”ë“œ ê¸°ìˆ ](#2-ë°±ì—”ë“œ-ê¸°ìˆ )
3. [AI/ML ë¼ì´ë¸ŒëŸ¬ë¦¬](#3-aiml-ë¼ì´ë¸ŒëŸ¬ë¦¬)
4. [í”„ë¡ íŠ¸ì—”ë“œ ê¸°ìˆ ](#4-í”„ë¡ íŠ¸ì—”ë“œ-ê¸°ìˆ )
5. [ë°ì´í„°ë² ì´ìŠ¤ ë° Storage](#5-ë°ì´í„°ë² ì´ìŠ¤-ë°-storage)
6. [ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬](#6-ìœ í‹¸ë¦¬í‹°-ë¼ì´ë¸ŒëŸ¬ë¦¬)
7. [ê°œë°œ ë„êµ¬](#7-ê°œë°œ-ë„êµ¬)
8. [ì˜ì¡´ì„± ì „ì²´ ëª©ë¡](#8-ì˜ì¡´ì„±-ì „ì²´-ëª©ë¡)

---

## 1. ê¸°ìˆ  ìŠ¤íƒ ê°œìš”

### 1.1 ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ê¸°ìˆ  ìŠ¤íƒ ë ˆì´ì–´                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

í”„ë¡ íŠ¸ì—”ë“œ ë ˆì´ì–´:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ HTML5 Canvas API                      â”‚
â”‚ â€¢ Vanilla JavaScript ES6+               â”‚
â”‚ â€¢ Socket.IO Client (4.7.2)             â”‚
â”‚ â€¢ DeviceMotion/Orientation API         â”‚
â”‚ â€¢ QRCode.js                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
ë°±ì—”ë“œ ë ˆì´ì–´:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Node.js (16.0.0+)                    â”‚
â”‚ â€¢ Express (4.18.2)                     â”‚
â”‚ â€¢ Socket.IO Server (4.7.2)             â”‚
â”‚ â€¢ Helmet (7.0.0) - ë³´ì•ˆ                 â”‚
â”‚ â€¢ Compression (1.7.4) - ì••ì¶•            â”‚
â”‚ â€¢ CORS (2.8.5)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
AI/ML ë ˆì´ì–´:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ @anthropic-ai/sdk (0.30.1)           â”‚
â”‚ â€¢ @langchain/anthropic (0.3.7)         â”‚
â”‚ â€¢ @langchain/community (0.3.17)        â”‚
â”‚ â€¢ @langchain/openai (0.3.14)           â”‚
â”‚ â€¢ openai (4.71.1)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
ë°ì´í„°ë² ì´ìŠ¤ ë ˆì´ì–´:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ @supabase/supabase-js (2.58.0)       â”‚
â”‚ â€¢ PostgreSQL 15+ (pgvector)            â”‚
â”‚ â€¢ Redis (ìºì‹± - ê³„íš)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ê¸°ìˆ  ìŠ¤íƒ ì„ íƒ ê¸°ì¤€

| ê¸°ì¤€ | ê°€ì¤‘ì¹˜ | ì„¤ëª… |
|------|--------|------|
| **ì„±ëŠ¥** | 30% | ì‘ë‹µ ì†ë„, ì²˜ë¦¬ëŸ‰, ë©”ëª¨ë¦¬ íš¨ìœ¨ |
| **í™•ì¥ì„±** | 25% | ì‚¬ìš©ì ì¦ê°€, ê¸°ëŠ¥ ì¶”ê°€ ëŒ€ì‘ |
| **ê°œë°œ ìƒì‚°ì„±** | 20% | ë¹ ë¥¸ ê°œë°œ, ë””ë²„ê¹… ìš©ì´ì„± |
| **ìƒíƒœê³„** | 15% | ë¼ì´ë¸ŒëŸ¬ë¦¬, ì»¤ë®¤ë‹ˆí‹°, ë¬¸ì„œ |
| **ë¹„ìš©** | 10% | ë¼ì´ì„ ìŠ¤, ì¸í”„ë¼ ë¹„ìš© |

---

## 2. ë°±ì—”ë“œ ê¸°ìˆ 

### 2.1 Node.js

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "Node.js",
  "version": "16.0.0+",
  "license": "MIT",
  "website": "https://nodejs.org"
}
```

#### ì„ íƒ ì´ìœ 

1. **ë¹„ë™ê¸° I/O**
   - Event Loop ê¸°ë°˜ Non-blocking I/O
   - WebSocket ì‹¤ì‹œê°„ í†µì‹ ì— ìµœì 
   - ë™ì‹œ ì ‘ì† 1,000ëª…+ ì²˜ë¦¬ ê°€ëŠ¥

2. **JavaScript ìƒíƒœê³„**
   - í”„ë¡ íŠ¸ì—”ë“œì™€ ë™ì¼ ì–¸ì–´ ì‚¬ìš©
   - npm íŒ¨í‚¤ì§€ 180ë§Œê°œ+
   - ë¹ ë¥¸ ê°œë°œ ë° ìœ ì§€ë³´ìˆ˜

3. **ì„±ëŠ¥**
   - V8 ì—”ì§„ (Chromeê³¼ ë™ì¼)
   - JIT ì»´íŒŒì¼ë¡œ ë¹ ë¥¸ ì‹¤í–‰
   - ë©”ëª¨ë¦¬ íš¨ìœ¨ì 

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
// server/index.js
const express = require('express');
const http = require('http');

const app = express();
const server = http.createServer(app);

// ë¹„ë™ê¸° I/O ì˜ˆì‹œ
app.get('/api/games', async (req, res) => {
    try {
        // ë³‘ë ¬ ì²˜ë¦¬
        const [localGames, remoteGames, stats] = await Promise.all([
            gameScanner.scanGames(),           // ë¡œì»¬ ìŠ¤ìº”
            supabase.from('generated_games').select('*'),  // DB ì¡°íšŒ
            getServerStats()                   // í†µê³„ ìˆ˜ì§‘
        ]);

        // ê²°ê³¼ ë³‘í•©
        const allGames = mergeGames(localGames, remoteGames.data);

        res.json({
            success: true,
            games: allGames,
            stats: stats,
            timestamp: Date.now()
        });
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
});

server.listen(3000, () => {
    console.log('âœ… Server started on port 3000');
});
```

### 2.2 Express

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "Express",
  "version": "4.18.2",
  "license": "MIT",
  "website": "https://expressjs.com"
}
```

#### ì„ íƒ ì´ìœ 

1. **ê²½ëŸ‰ í”„ë ˆì„ì›Œí¬**
   - ë¯¸ë‹ˆë©€ë¦¬ìŠ¤íŠ¸ ì² í•™
   - í•„ìš”í•œ ê¸°ëŠ¥ë§Œ ì„ íƒì  ì‚¬ìš©
   - ë¹ ë¥¸ ë¶€íŒ… ì‹œê°„

2. **ë¯¸ë“¤ì›¨ì–´ ìƒíƒœê³„**
   - í’ë¶€í•œ ë¯¸ë“¤ì›¨ì–´ (ì¸ì¦, ë¡œê¹…, ì••ì¶• ë“±)
   - ì»¤ìŠ¤í…€ ë¯¸ë“¤ì›¨ì–´ ì‰½ê²Œ ì‘ì„±
   - ì²´ì¸ ë°©ì‹ìœ¼ë¡œ ì¡°í•© ê°€ëŠ¥

3. **ë¼ìš°íŒ…**
   - RESTful API êµ¬ì¡° ëª…í™•
   - íŒŒë¼ë¯¸í„°, ì¿¼ë¦¬ ì²˜ë¦¬ ê°„í¸
   - ë¼ìš°íŠ¸ ëª¨ë“ˆí™” ìš©ì´

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
// ë¯¸ë“¤ì›¨ì–´ ì²´ì¸
app.use(helmet());                    // ë³´ì•ˆ í—¤ë”
app.use(compression());               // Gzip ì••ì¶•
app.use(cors());                      // CORS í—ˆìš©
app.use(express.json({ limit: '10mb' }));  // JSON íŒŒì‹±

// ë¼ìš°íŠ¸ ëª¨ë“ˆí™”
app.use('/api/auth', authRoutes);
app.use('/api/games', gameRoutes);
app.use('/developer', developerRoutes);
app.use('/landing', landingRoutes);

// ì—ëŸ¬ í•¸ë“¤ë§ ë¯¸ë“¤ì›¨ì–´
app.use((err, req, res, next) => {
    console.error('âŒ ì˜¤ë¥˜:', err.stack);
    res.status(500).json({
        success: false,
        error: process.env.NODE_ENV === 'production'
            ? 'Internal Server Error'
            : err.message
    });
});
```

### 2.3 Socket.IO

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "Socket.IO",
  "version": "4.7.2",
  "license": "MIT",
  "website": "https://socket.io"
}
```

#### ì„ íƒ ì´ìœ 

1. **ìë™ ì¬ì—°ê²°**
   - ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ì‹œ ìë™ ë³µêµ¬
   - ëª¨ë°”ì¼ í™˜ê²½ì— í•„ìˆ˜ì 
   - ì¬ì—°ê²° ì „ëµ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥

2. **í´ë°± ì§€ì›**
   - WebSocket ìš°ì„  ì‚¬ìš©
   - ì‹¤íŒ¨ ì‹œ Long Pollingìœ¼ë¡œ ìë™ ì „í™˜
   - ëª¨ë“  ë¸Œë¼ìš°ì € ì§€ì›

3. **ì´ë²¤íŠ¸ ê¸°ë°˜**
   - ì§ê´€ì ì¸ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
   - íƒ€ì… ì•ˆì „ì„± (TypeScript ì§€ì›)
   - ë£¸/ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¡œ ê·¸ë£¹ ê´€ë¦¬

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
// server/index.js
const io = socketIO(server, {
    cors: {
        origin: process.env.CORS_ORIGIN || '*',
        methods: ['GET', 'POST']
    },
    transports: ['websocket', 'polling'],  // í´ë°± ì„¤ì •
    pingTimeout: 60000,                    // íƒ€ì„ì•„ì›ƒ
    pingInterval: 25000                    // Ping ê°„ê²©
});

io.on('connection', (socket) => {
    console.log(`âœ… í´ë¼ì´ì–¸íŠ¸ ì—°ê²°: ${socket.id}`);

    // ì„¸ì…˜ ìƒì„±
    socket.on('create-session', async (data) => {
        try {
            const session = sessionManager.createSession(
                data.gameId,
                data.gameType,
                socket.id
            );

            // ë£¸ ì°¸ê°€
            socket.join(`session-${session.id}`);

            // ì„±ê³µ ì‘ë‹µ
            socket.emit('session-created', session);

            console.log(`ğŸ® ì„¸ì…˜ ìƒì„±: ${session.id} (ì½”ë“œ: ${session.code})`);
        } catch (error) {
            socket.emit('error', { message: error.message });
        }
    });

    // ì„¼ì„œ ì—°ê²°
    socket.on('connect-sensor', async (data) => {
        try {
            const { sessionId, sensorId } = sessionManager.connectSensor(
                data.sessionCode,
                socket.id,
                data.deviceInfo
            );

            const session = sessionManager.getSession(sessionId);

            // ì„¼ì„œ ë£¸ ì°¸ê°€
            socket.join(`session-${sessionId}`);

            // í˜¸ìŠ¤íŠ¸ì—ê²Œ ì•Œë¦¼
            io.to(session.host).emit('sensor-connected', {
                sessionId,
                sensorId,
                deviceInfo: data.deviceInfo
            });

            // ì„¼ì„œì—ê²Œ í™•ì¸
            socket.emit('connection-confirmed', { sessionId, sensorId });

            console.log(`ğŸ“± ì„¼ì„œ ì—°ê²°: ${sensorId} â†’ ì„¸ì…˜ ${sessionId}`);
        } catch (error) {
            socket.emit('error', { message: error.message });
        }
    });

    // ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹ 
    socket.on('sensor-data', async (data) => {
        const session = sessionManager.getSessionByCode(data.sessionCode);

        if (session) {
            // í˜¸ìŠ¤íŠ¸ì—ê²Œ ì „ë‹¬ (ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì•„ë‹˜!)
            io.to(session.host).emit('sensor-update', {
                sensorId: data.sensorId,
                data: data.sensorData,
                timestamp: Date.now()
            });
        }
    });

    // ì—°ê²° í•´ì œ
    socket.on('disconnect', () => {
        sessionManager.handleDisconnect(socket.id);
        console.log(`âŒ í´ë¼ì´ì–¸íŠ¸ ì—°ê²° í•´ì œ: ${socket.id}`);
    });
});
```

### 2.4 Helmet

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "Helmet",
  "version": "7.0.0",
  "license": "MIT",
  "website": "https://helmetjs.github.io"
}
```

#### ì„ íƒ ì´ìœ 

1. **ë³´ì•ˆ í—¤ë” ìë™ ì„¤ì •**
   - XSS ë°©ì–´
   - Clickjacking ë°©ì§€
   - MIME Type Sniffing ì°¨ë‹¨

2. **ê°„í¸í•œ ì‚¬ìš©**
   - í•œ ì¤„ë¡œ 12ê°œ ë³´ì•ˆ í—¤ë” ì„¤ì •
   - ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
const helmet = require('helmet');

app.use(helmet({
    contentSecurityPolicy: {
        directives: {
            defaultSrc: ["'self'"],
            scriptSrc: ["'self'", "'unsafe-inline'", "https://cdn.socket.io"],
            styleSrc: ["'self'", "'unsafe-inline'"],
            imgSrc: ["'self'", "data:", "https:"],
            connectSrc: ["'self'", "wss:", "https:"],
            fontSrc: ["'self'", "https:", "data:"],
            objectSrc: ["'none'"],
            mediaSrc: ["'self'"],
            frameSrc: ["'none'"]
        }
    },
    crossOriginEmbedderPolicy: false,  // Canvas ì‚¬ìš© í—ˆìš©
    crossOriginResourcePolicy: { policy: "cross-origin" }
}));
```

**ì„¤ì •ëœ í—¤ë”**:
```
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
Strict-Transport-Security: max-age=15552000; includeSubDomains
Content-Security-Policy: (ìœ„ ì„¤ì •)
```

### 2.5 Compression

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "Compression",
  "version": "1.7.4",
  "license": "MIT"
}
```

#### ì„ íƒ ì´ìœ 

1. **ì‘ë‹µ í¬ê¸° ê°ì†Œ**
   - Gzip ì••ì¶•ìœ¼ë¡œ í‰ê·  70-80% ê°ì†Œ
   - ëŒ€ì—­í­ ì ˆì•½
   - ë¡œë”© ì†ë„ í–¥ìƒ

2. **ì„±ëŠ¥**
   - CPU ì‚¬ìš©ëŸ‰ ë¯¸ë¯¸
   - ëŒ€ìš©ëŸ‰ ì‘ë‹µì— íŠ¹íˆ íš¨ê³¼ì 

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
const compression = require('compression');

app.use(compression({
    level: 6,                    // ì••ì¶• ë ˆë²¨ (0-9, ê¸°ë³¸: 6)
    threshold: 1024,             // 1KB ì´ìƒë§Œ ì••ì¶•
    filter: (req, res) => {
        // ì´ë¯¸ ì••ì¶•ëœ íŒŒì¼ ì œì™¸
        if (req.headers['x-no-compression']) {
            return false;
        }
        return compression.filter(req, res);
    }
}));
```

**ì••ì¶• íš¨ê³¼**:
```
HTML íŒŒì¼ (ê²Œì„ ì½”ë“œ):
â”œâ”€ ì›ë³¸: 150KB
â””â”€ ì••ì¶•: 30KB (80% ê°ì†Œ)

JSON ì‘ë‹µ (ê²Œì„ ëª©ë¡):
â”œâ”€ ì›ë³¸: 50KB
â””â”€ ì••ì¶•: 10KB (80% ê°ì†Œ)

JavaScript:
â”œâ”€ ì›ë³¸: 200KB
â””â”€ ì••ì¶•: 60KB (70% ê°ì†Œ)
```

### 2.6 CORS

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "CORS",
  "version": "2.8.5",
  "license": "MIT"
}
```

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
const cors = require('cors');

app.use(cors({
    origin: process.env.NODE_ENV === 'production'
        ? ['https://sensorchatbot.onrender.com']
        : ['http://localhost:3000', 'http://localhost:5173'],
    methods: ['GET', 'POST', 'PUT', 'DELETE'],
    credentials: true,
    maxAge: 86400  // 24ì‹œê°„
}));
```

---

## 3. AI/ML ë¼ì´ë¸ŒëŸ¬ë¦¬

### 3.1 Anthropic SDK

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "@anthropic-ai/sdk",
  "version": "0.30.1",
  "license": "MIT",
  "website": "https://docs.anthropic.com"
}
```

#### ì„ íƒ ì´ìœ 

1. **ì§ì ‘ ì œì–´**
   - Claude API ì§ì ‘ í˜¸ì¶œ
   - ìŠ¤íŠ¸ë¦¬ë° ì§€ì›
   - 1M í† í° ì»¨í…ìŠ¤íŠ¸ í™œìš©

2. **ìµœì‹  ëª¨ë¸ ì§€ì›**
   - Claude Sonnet 4.5 (64K í† í° ì¶œë ¥)
   - Claude Opus 4 (ë³µì¡í•œ ì‘ì—…ìš©)
   - ì‹¤ì‹œê°„ ëª¨ë¸ ì—…ë°ì´íŠ¸

3. **TypeScript ë„¤ì´í‹°ë¸Œ**
   - íƒ€ì… ì•ˆì „ì„±
   - ìë™ì™„ì„±
   - ì˜¤ë¥˜ ì‚¬ì „ ë°©ì§€

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
const Anthropic = require('@anthropic-ai/sdk');

const anthropic = new Anthropic({
    apiKey: process.env.CLAUDE_API_KEY
});

// ê²Œì„ ì½”ë“œ ìƒì„±
async function generateGameCode(prompt, context) {
    const response = await anthropic.messages.create({
        model: 'claude-sonnet-4-5-20250929',
        max_tokens: 64000,
        temperature: 0.3,
        messages: [
            {
                role: 'user',
                content: `${context}\n\n${prompt}`
            }
        ]
    });

    return response.content[0].text;
}

// ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ
async function streamingGenerate(prompt) {
    const stream = await anthropic.messages.stream({
        model: 'claude-sonnet-4-5-20250929',
        max_tokens: 64000,
        messages: [{ role: 'user', content: prompt }]
    });

    for await (const chunk of stream) {
        if (chunk.type === 'content_block_delta') {
            process.stdout.write(chunk.delta.text);
        }
    }
}
```

**API ìš”ì²­ ì˜ˆì‹œ**:
```json
{
  "model": "claude-sonnet-4-5-20250929",
  "max_tokens": 64000,
  "temperature": 0.3,
  "top_p": 0.9,
  "messages": [
    {
      "role": "user",
      "content": "í”„ë¡¬í”„íŠ¸..."
    }
  ]
}
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "id": "msg_01XYZ...",
  "type": "message",
  "role": "assistant",
  "content": [
    {
      "type": "text",
      "text": "<!DOCTYPE html>\n<html>..."
    }
  ],
  "model": "claude-sonnet-4-5-20250929",
  "stop_reason": "end_turn",
  "usage": {
    "input_tokens": 5420,
    "output_tokens": 42350
  }
}
```

### 3.2 Langchain

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "@langchain/anthropic",
  "version": "0.3.7",
  "name": "@langchain/community",
  "version": "0.3.17",
  "name": "@langchain/openai",
  "version": "0.3.14",
  "license": "MIT",
  "website": "https://js.langchain.com"
}
```

#### ì„ íƒ ì´ìœ 

1. **RAG íŒŒì´í”„ë¼ì¸**
   - ë¬¸ì„œ ë¡œë”©, ì²­í‚¹, ì„ë² ë”© ì¶”ìƒí™”
   - ë²¡í„° ì €ì¥ì†Œ í†µí•©
   - ê²€ìƒ‰ ë° ì¡°íšŒ ê°„ì†Œí™”

2. **ì²´ì¸ êµ¬ì„±**
   - ë³µì¡í•œ AI ì›Œí¬í”Œë¡œìš° ì²´ê³„í™”
   - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
   - ì—ëŸ¬ í•¸ë“¤ë§ í†µí•©

3. **ë©€í‹° ëª¨ë¸ ì§€ì›**
   - Anthropic, OpenAI ë™ì‹œ ì‚¬ìš©
   - ëª¨ë¸ ì „í™˜ ìš©ì´
   - í´ë°± ì „ëµ êµ¬í˜„ ê°€ëŠ¥

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
const { ChatAnthropic } = require('@langchain/anthropic');
const { OpenAIEmbeddings } = require('@langchain/openai');
const { SupabaseVectorStore } = require('@langchain/community/vectorstores/supabase');
const { RecursiveCharacterTextSplitter } = require('langchain/text_splitter');

// RAG ì‹œìŠ¤í…œ êµ¬ì¶•
class RAGSystem {
    constructor() {
        // ì„ë² ë”© ëª¨ë¸
        this.embeddings = new OpenAIEmbeddings({
            modelName: 'text-embedding-3-small',
            apiKey: process.env.OPENAI_API_KEY
        });

        // ë²¡í„° ì €ì¥ì†Œ
        this.vectorStore = new SupabaseVectorStore(this.embeddings, {
            client: supabaseClient,
            tableName: 'game_knowledge',
            queryName: 'match_documents'
        });

        // í…ìŠ¤íŠ¸ ë¶„í• ê¸°
        this.textSplitter = new RecursiveCharacterTextSplitter({
            chunkSize: 1000,
            chunkOverlap: 200
        });
    }

    // ë¬¸ì„œ ì„ë² ë”©
    async embedDocuments(documents) {
        // ì²­í‚¹
        const chunks = await this.textSplitter.splitDocuments(documents);

        // ë²¡í„° ì €ì¥ì†Œì— ì¶”ê°€
        await this.vectorStore.addDocuments(chunks);

        console.log(`âœ… ${chunks.length}ê°œ ì²­í¬ ì„ë² ë”© ì™„ë£Œ`);
    }

    // ìœ ì‚¬ë„ ê²€ìƒ‰
    async search(query, topK = 5) {
        const results = await this.vectorStore.similaritySearch(query, topK);

        return results.map(doc => ({
            content: doc.pageContent,
            metadata: doc.metadata,
            score: doc.score
        }));
    }
}
```

### 3.3 OpenAI

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "openai",
  "version": "4.71.1",
  "license": "MIT",
  "website": "https://platform.openai.com"
}
```

#### ì„ íƒ ì´ìœ 

1. **ì„ë² ë”© íŠ¹í™”**
   - text-embedding-3-small: ê³ ì„±ëŠ¥, ì €ë¹„ìš©
   - 1536 ì°¨ì› ë²¡í„°
   - ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê²€ìƒ‰ ìµœì í™”

2. **ì•ˆì •ì„±**
   - 99.9% ì—…íƒ€ì„
   - ë¹ ë¥¸ ì‘ë‹µ ì†ë„ (< 100ms)
   - ê¸€ë¡œë²Œ CDN

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
const OpenAI = require('openai');

const openai = new OpenAI({
    apiKey: process.env.OPENAI_API_KEY
});

// ì„ë² ë”© ìƒì„±
async function createEmbedding(text) {
    const response = await openai.embeddings.create({
        model: 'text-embedding-3-small',
        input: text,
        dimensions: 1536
    });

    return response.data[0].embedding;
}

// ë°°ì¹˜ ì„ë² ë”© (íš¨ìœ¨ì )
async function batchEmbeddings(texts) {
    const response = await openai.embeddings.create({
        model: 'text-embedding-3-small',
        input: texts,  // ë°°ì—´ë¡œ ì „ë‹¬
        dimensions: 1536
    });

    return response.data.map(item => item.embedding);
}
```

**ë¹„ìš©**:
```
text-embedding-3-small:
â”œâ”€ ê°€ê²©: $0.020 / 1M í† í°
â”œâ”€ 400ê°œ ë¬¸ì„œ (í‰ê·  1,000í† í°): $0.008
â””â”€ 1íšŒ ê²€ìƒ‰ (50í† í°): $0.000001
```

---

## 4. í”„ë¡ íŠ¸ì—”ë“œ ê¸°ìˆ 

### 4.1 HTML5 Canvas API

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "HTML5 Canvas",
  "version": "í‘œì¤€",
  "browser_support": "IE9+, ëª¨ë“  ëª¨ë˜ ë¸Œë¼ìš°ì €"
}
```

#### ì„ íƒ ì´ìœ 

1. **ì„±ëŠ¥**
   - í•˜ë“œì›¨ì–´ ê°€ì† ì§€ì›
   - 60fps ì•ˆì •ì  ìœ ì§€
   - ë©”ëª¨ë¦¬ íš¨ìœ¨ì 

2. **ê°„í¸í•œ API**
   - ì§ê´€ì ì¸ 2D ê·¸ë˜í”½ API
   - ì´ë¯¸ì§€, í…ìŠ¤íŠ¸, ë„í˜• ì‰½ê²Œ ê·¸ë¦¬ê¸°
   - ë³€í™˜(íšŒì „, ìŠ¤ì¼€ì¼) ê°„ë‹¨

3. **í¬ë¡œìŠ¤ í”Œë«í¼**
   - ëª¨ë“  ë””ë°”ì´ìŠ¤ì—ì„œ ë™ì‘
   - ë³„ë„ í”ŒëŸ¬ê·¸ì¸ ë¶ˆí•„ìš”

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
// ê²Œì„ ë Œë”ë§ ë£¨í”„
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');

let ball = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    radius: 20,
    dx: 0,
    dy: 0,
    color: '#3B82F6'
};

function gameLoop() {
    // í™”ë©´ í´ë¦¬ì–´
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // ë°°ê²½
    ctx.fillStyle = '#1F2937';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // ê³µ ê·¸ë¦¬ê¸°
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
    ctx.fillStyle = ball.color;
    ctx.fill();
    ctx.closePath();

    // ìœ„ì¹˜ ì—…ë°ì´íŠ¸
    ball.x += ball.dx;
    ball.y += ball.dy;

    // ê²½ê³„ ì²´í¬
    if (ball.x < ball.radius || ball.x > canvas.width - ball.radius) {
        ball.dx *= -1;
    }
    if (ball.y < ball.radius || ball.y > canvas.height - ball.radius) {
        ball.dy *= -1;
    }

    // ë‹¤ìŒ í”„ë ˆì„
    requestAnimationFrame(gameLoop);
}

// ê²Œì„ ì‹œì‘
requestAnimationFrame(gameLoop);
```

**ì„±ëŠ¥ ìµœì í™” ê¸°ë²•**:
```javascript
// 1. ì˜¤í”„ìŠ¤í¬ë¦° ìº”ë²„ìŠ¤ (ë°°ê²½ ìºì‹±)
const offscreenCanvas = document.createElement('canvas');
const offscreenCtx = offscreenCanvas.getContext('2d');

// ë°°ê²½ í•œ ë²ˆë§Œ ê·¸ë¦¬ê¸°
offscreenCtx.fillStyle = '#1F2937';
offscreenCtx.fillRect(0, 0, width, height);

// ë©”ì¸ ë£¨í”„ì—ì„œëŠ” ë³µì‚¬ë§Œ
ctx.drawImage(offscreenCanvas, 0, 0);

// 2. ë”ë¸” ë²„í¼ë§ (ê¹œë¹¡ì„ ë°©ì§€)
// requestAnimationFrameì´ ìë™ ì²˜ë¦¬

// 3. ì˜ì—­ ì—…ë°ì´íŠ¸ (ë¶€ë¶„ ë Œë”ë§)
const dirtyRect = { x: ball.x - radius, y: ball.y - radius, w: radius * 2, h: radius * 2 };
ctx.clearRect(dirtyRect.x, dirtyRect.y, dirtyRect.w, dirtyRect.h);
```

### 4.2 DeviceMotion/Orientation API

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "Device Sensor APIs",
  "version": "W3C Candidate Recommendation",
  "browser_support": "iOS 4.2+, Android 3.0+, Chrome, Firefox"
}
```

#### ì„ íƒ ì´ìœ 

1. **ì„¼ì„œ ì ‘ê·¼**
   - ê°€ì†ë„ê³„, ìì´ë¡œìŠ¤ì½”í”„ ì§ì ‘ ì ‘ê·¼
   - ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¼
   - ë„¤ì´í‹°ë¸Œ ì•± ì„±ëŠ¥

2. **ì›¹ í‘œì¤€**
   - ë³„ë„ ì•± ì„¤ì¹˜ ë¶ˆí•„ìš”
   - í¬ë¡œìŠ¤ í”Œë«í¼
   - ìë™ ì—…ë°ì´íŠ¸

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
// iOS 13+ ê¶Œí•œ ìš”ì²­
async function requestSensorPermission() {
    if (typeof DeviceMotionEvent !== 'undefined' &&
        typeof DeviceMotionEvent.requestPermission === 'function') {

        try {
            const permission = await DeviceMotionEvent.requestPermission();

            if (permission === 'granted') {
                console.log('âœ… ì„¼ì„œ ê¶Œí•œ ìŠ¹ì¸');
                return true;
            } else {
                console.log('âŒ ì„¼ì„œ ê¶Œí•œ ê±°ë¶€');
                return false;
            }
        } catch (error) {
            console.error('ê¶Œí•œ ìš”ì²­ ì‹¤íŒ¨:', error);
            return false;
        }
    }

    // Android ë° ì´ì „ iOSëŠ” ê¶Œí•œ ë¶ˆí•„ìš”
    return true;
}

// ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘
class SensorCollector {
    constructor() {
        this.data = {
            orientation: { alpha: 0, beta: 0, gamma: 0 },
            acceleration: { x: 0, y: 0, z: 0 },
            rotationRate: { alpha: 0, beta: 0, gamma: 0 }
        };
        this.lastSendTime = 0;
        this.throttleInterval = 50;  // 50ms = 20Hz
    }

    start(callback) {
        // ë°©í–¥ ì„¼ì„œ
        window.addEventListener('deviceorientation', (event) => {
            this.data.orientation = {
                alpha: event.alpha || 0,  // ë‚˜ì¹¨ë°˜ (0-360)
                beta: event.beta || 0,    // ì•ë’¤ (-180~180)
                gamma: event.gamma || 0   // ì¢Œìš° (-90~90)
            };

            this.throttledSend(callback);
        });

        // ê°€ì†ë„ ì„¼ì„œ
        window.addEventListener('devicemotion', (event) => {
            if (event.acceleration) {
                this.data.acceleration = {
                    x: event.acceleration.x || 0,
                    y: event.acceleration.y || 0,
                    z: event.acceleration.z || 0
                };
            }

            if (event.rotationRate) {
                this.data.rotationRate = {
                    alpha: event.rotationRate.alpha || 0,
                    beta: event.rotationRate.beta || 0,
                    gamma: event.rotationRate.gamma || 0
                };
            }

            this.throttledSend(callback);
        });
    }

    // ì“°ë¡œí‹€ë§ (50ms ê°„ê²©)
    throttledSend(callback) {
        const now = Date.now();
        if (now - this.lastSendTime >= this.throttleInterval) {
            callback(this.data);
            this.lastSendTime = now;
        }
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const collector = new SensorCollector();

// ê¶Œí•œ ìš”ì²­ í›„ ì‹œì‘
requestSensorPermission().then(granted => {
    if (granted) {
        collector.start((sensorData) => {
            // WebSocketìœ¼ë¡œ ì „ì†¡
            socket.emit('sensor-data', {
                sessionCode: '1234',
                sensorData: sensorData
            });
        });
    }
});
```

**ì„¼ì„œ ë°ì´í„° ì˜ˆì‹œ**:
```json
{
  "orientation": {
    "alpha": 245.3,
    "beta": 15.7,
    "gamma": -8.2
  },
  "acceleration": {
    "x": 0.23,
    "y": -9.81,
    "z": 0.12
  },
  "rotationRate": {
    "alpha": 0.5,
    "beta": -0.3,
    "gamma": 0.1
  }
}
```

### 4.3 Socket.IO Client

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "Socket.IO Client",
  "version": "4.7.2",
  "license": "MIT"
}
```

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
// SessionSDK.js
class SessionSDK extends EventTarget {
    constructor(options) {
        super();
        this.config = {
            serverUrl: options.serverUrl || window.location.origin,
            gameId: options.gameId,
            gameType: options.gameType,
            autoReconnect: true
        };

        this.socket = null;
        this.connect();
    }

    connect() {
        this.socket = io(this.config.serverUrl, {
            transports: ['websocket', 'polling'],
            reconnection: true,
            reconnectionDelay: 1000,
            reconnectionDelayMax: 5000,
            reconnectionAttempts: 5
        });

        this.setupEvents();
    }

    setupEvents() {
        // ì—°ê²° ì„±ê³µ
        this.socket.on('connect', () => {
            console.log('âœ… ì„œë²„ ì—°ê²° ì„±ê³µ');
            this.emit('connected');
        });

        // ì—°ê²° í•´ì œ
        this.socket.on('disconnect', (reason) => {
            console.log('âŒ ì„œë²„ ì—°ê²° í•´ì œ:', reason);
            this.emit('disconnected', { reason });

            if (reason === 'io server disconnect') {
                // ì„œë²„ê°€ ì—°ê²° ëŠìŒ â†’ ì¬ì—°ê²°
                this.socket.connect();
            }
        });

        // ì¬ì—°ê²° ì‹œë„
        this.socket.on('reconnect_attempt', (attemptNumber) => {
            console.log(`ğŸ”„ ì¬ì—°ê²° ì‹œë„ ${attemptNumber}...`);
        });

        // ì¬ì—°ê²° ì„±ê³µ
        this.socket.on('reconnect', (attemptNumber) => {
            console.log(`âœ… ì¬ì—°ê²° ì„±ê³µ (${attemptNumber}íšŒ ì‹œë„)`);
            this.emit('reconnected', { attempts: attemptNumber });
        });

        // ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸
        this.socket.on('session-created', (data) => {
            this.emit('session-created', data);
        });

        this.socket.on('sensor-connected', (data) => {
            this.emit('sensor-connected', data);
        });

        this.socket.on('sensor-update', (data) => {
            this.emit('sensor-data', data);
        });
    }

    // CustomEvent ë°œí–‰
    emit(eventName, data) {
        const event = new CustomEvent(eventName, {
            detail: data,
            bubbles: true
        });
        this.dispatchEvent(event);
    }

    // ì„¸ì…˜ ìƒì„±
    async createSession() {
        return new Promise((resolve, reject) => {
            const timeout = setTimeout(() => {
                reject(new Error('ì„¸ì…˜ ìƒì„± íƒ€ì„ì•„ì›ƒ'));
            }, 10000);

            this.socket.once('session-created', (data) => {
                clearTimeout(timeout);
                resolve(data);
            });

            this.socket.emit('create-session', {
                gameId: this.config.gameId,
                gameType: this.config.gameType
            });
        });
    }
}
```

---

## 5. ë°ì´í„°ë² ì´ìŠ¤ ë° Storage

### 5.1 Supabase

#### ê¸°ë³¸ ì •ë³´

```json
{
  "name": "@supabase/supabase-js",
  "version": "2.58.0",
  "license": "MIT",
  "website": "https://supabase.com"
}
```

#### ì„ íƒ ì´ìœ 

1. **PostgreSQL ê¸°ë°˜**
   - ê°•ë ¥í•œ SQL ê¸°ëŠ¥
   - ACID íŠ¸ëœì­ì…˜
   - í™•ì¥ì„± (ìˆ˜í‰/ìˆ˜ì§)

2. **pgvector ë‚´ì¥**
   - ë²¡í„° ê²€ìƒ‰ ë„¤ì´í‹°ë¸Œ ì§€ì›
   - RAG ì‹œìŠ¤í…œì— í•„ìˆ˜
   - ì„¤ì • ê°„í¸

3. **í†µí•© ì„œë¹„ìŠ¤**
   - DB + Auth + Storage + Realtime
   - ë‹¨ì¼ í”Œë«í¼ ê´€ë¦¬
   - ë¹„ìš© ì ˆê°

#### ì½”ë“œ ì˜ˆì‹œ

```javascript
const { createClient } = require('@supabase/supabase-js');

// í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
const supabase = createClient(
    process.env.SUPABASE_URL,
    process.env.SUPABASE_ANON_KEY
);

// Admin í´ë¼ì´ì–¸íŠ¸ (RLS ìš°íšŒ)
const supabaseAdmin = createClient(
    process.env.SUPABASE_URL,
    process.env.SUPABASE_SERVICE_ROLE_KEY
);

// 1. ë°ì´í„° ì¡°íšŒ (RLS ì ìš©)
async function getGames() {
    const { data, error } = await supabase
        .from('generated_games')
        .select('*')
        .order('created_at', { ascending: false });

    if (error) throw error;
    return data;
}

// 2. ë°ì´í„° ì‚½ì… (creator_id ìë™ ì„¤ì •)
async function createGame(gameData, userId) {
    const { data, error } = await supabase
        .from('generated_games')
        .insert({
            ...gameData,
            creator_id: userId  // RLS ì •ì±… ê²€ì¦
        })
        .select()
        .single();

    if (error) throw error;
    return data;
}

// 3. ë°ì´í„° ì—…ë°ì´íŠ¸ (ê¶Œí•œ ê²€ì¦)
async function updateGame(gameId, updates, userId) {
    const { data, error } = await supabase
        .from('generated_games')
        .update(updates)
        .eq('game_id', gameId)
        .eq('creator_id', userId)  // ë³¸ì¸ ê²Œì„ë§Œ ìˆ˜ì •
        .select()
        .single();

    if (error) throw error;
    return data;
}

// 4. Storage íŒŒì¼ ì—…ë¡œë“œ
async function uploadGameFile(gameId, htmlContent) {
    const { data, error } = await supabaseAdmin
        .storage
        .from('games')
        .upload(`${gameId}/index.html`, htmlContent, {
            contentType: 'text/html',
            upsert: true
        });

    if (error) throw error;

    // Public URL ìƒì„±
    const { data: { publicUrl } } = supabaseAdmin
        .storage
        .from('games')
        .getPublicUrl(`${gameId}/index.html`);

    return publicUrl;
}

// 5. ë²¡í„° ê²€ìƒ‰ (RAG)
async function searchDocuments(query, topK = 5) {
    // ì¿¼ë¦¬ ì„ë² ë”© ìƒì„±
    const queryEmbedding = await createEmbedding(query);

    // RPC í•¨ìˆ˜ í˜¸ì¶œ (pgvector)
    const { data, error } = await supabase
        .rpc('match_documents', {
            query_embedding: queryEmbedding,
            match_count: topK,
            similarity_threshold: 0.7
        });

    if (error) throw error;
    return data;
}
```

**RLS ì •ì±… ì˜ˆì‹œ**:
```sql
-- SELECT: ëª¨ë“  ì‚¬ìš©ì ì½ê¸° ê°€ëŠ¥
CREATE POLICY "Anyone can read games"
ON generated_games FOR SELECT
USING (true);

-- INSERT: ì¸ì¦ëœ ì‚¬ìš©ì, creator_id ê²€ì¦
CREATE POLICY "Authenticated users can insert games"
ON generated_games FOR INSERT
TO authenticated
WITH CHECK (auth.uid() = creator_id);

-- UPDATE: ë³¸ì¸ ë˜ëŠ” adminë§Œ ìˆ˜ì •
CREATE POLICY "Creator or admin can update games"
ON generated_games FOR UPDATE
TO authenticated
USING (
    auth.uid() = creator_id OR
    auth.email() = 'admin@admin.com'
);
```

---

## 6. ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬

### 6.1 íŒŒì¼ ì²˜ë¦¬

#### Archiver

```json
{
  "name": "archiver",
  "version": "7.0.1",
  "license": "MIT"
}
```

**ìš©ë„**: ZIP íŒŒì¼ ìƒì„± (ê²Œì„ ë‹¤ìš´ë¡œë“œ)

```javascript
const archiver = require('archiver');
const fs = require('fs');

async function createGameZip(gameId, outputPath) {
    const output = fs.createWriteStream(outputPath);
    const archive = archiver('zip', { zlib: { level: 9 } });

    archive.pipe(output);

    // ê²Œì„ íŒŒì¼ ì¶”ê°€
    archive.file(`public/games/${gameId}/index.html`, { name: 'index.html' });
    archive.file(`public/games/${gameId}/game.json`, { name: 'game.json' });

    // ë””ë ‰í† ë¦¬ ì¶”ê°€
    archive.directory(`public/games/${gameId}/assets`, 'assets');

    await archive.finalize();

    return outputPath;
}
```

#### Multer

```json
{
  "name": "multer",
  "version": "2.0.2",
  "license": "MIT"
}
```

**ìš©ë„**: íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬

```javascript
const multer = require('multer');
const path = require('path');

// ì—…ë¡œë“œ ì„¤ì •
const storage = multer.diskStorage({
    destination: (req, file, cb) => {
        cb(null, 'uploads/');
    },
    filename: (req, file, cb) => {
        const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);
        cb(null, file.fieldname + '-' + uniqueSuffix + path.extname(file.originalname));
    }
});

const upload = multer({
    storage: storage,
    limits: { fileSize: 10 * 1024 * 1024 },  // 10MB
    fileFilter: (req, file, cb) => {
        const allowedTypes = /html|json|png|jpg|jpeg|mp3|mp4/;
        const ext = allowedTypes.test(path.extname(file.originalname).toLowerCase());
        const mime = allowedTypes.test(file.mimetype);

        if (ext && mime) {
            cb(null, true);
        } else {
            cb(new Error('í—ˆìš©ë˜ì§€ ì•ŠëŠ” íŒŒì¼ íƒ€ì…'));
        }
    }
});

// ë¼ìš°íŠ¸
app.post('/api/upload-game', upload.single('gameFile'), (req, res) => {
    res.json({
        success: true,
        filename: req.file.filename,
        path: req.file.path
    });
});
```

### 6.2 HTML/ë§ˆí¬ë‹¤ìš´ ì²˜ë¦¬

#### JSDOM

```json
{
  "name": "jsdom",
  "version": "26.1.0",
  "license": "MIT"
}
```

**ìš©ë„**: HTML íŒŒì‹± ë° ê²€ì¦

```javascript
const { JSDOM } = require('jsdom');

// HTML ê²€ì¦
function validateHTML(htmlCode) {
    const dom = new JSDOM(htmlCode);
    const document = dom.window.document;

    const errors = [];

    // í•„ìˆ˜ ìš”ì†Œ í™•ì¸
    if (!document.querySelector('canvas')) {
        errors.push('Canvas ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤.');
    }

    if (!document.querySelector('script')) {
        errors.push('JavaScript ì½”ë“œê°€ ì—†ìŠµë‹ˆë‹¤.');
    }

    // SessionSDK ì‚¬ìš© í™•ì¸
    const scripts = Array.from(document.querySelectorAll('script'));
    const hasSessionSDK = scripts.some(script =>
        script.textContent.includes('new SessionSDK')
    );

    if (!hasSessionSDK) {
        errors.push('SessionSDK ì´ˆê¸°í™”ê°€ ì—†ìŠµë‹ˆë‹¤.');
    }

    return {
        valid: errors.length === 0,
        errors: errors
    };
}
```

#### Marked

```json
{
  "name": "marked",
  "version": "15.0.12",
  "license": "MIT"
}
```

**ìš©ë„**: Markdown â†’ HTML ë³€í™˜

```javascript
const { marked } = require('marked');
const hljs = require('highlight.js');

// ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ì„¤ì •
marked.setOptions({
    highlight: (code, lang) => {
        if (lang && hljs.getLanguage(lang)) {
            return hljs.highlight(code, { language: lang }).value;
        }
        return hljs.highlightAuto(code).value;
    },
    breaks: true,
    gfm: true
});

// ë³€í™˜
const markdown = '# Hello\n```javascript\nconsole.log("hi");\n```';
const html = marked.parse(markdown);
```

---

## 7. ê°œë°œ ë„êµ¬

### 7.1 í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬

#### dotenv

```json
{
  "name": "dotenv",
  "version": "16.4.7",
  "license": "BSD-2-Clause"
}
```

```javascript
require('dotenv').config();

// .env íŒŒì¼
/*
CLAUDE_API_KEY=sk-ant-api03-xxxxx
OPENAI_API_KEY=sk-xxxxx
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx
PORT=3000
NODE_ENV=production
*/
```

### 7.2 TypeScript

```json
{
  "name": "typescript",
  "version": "5.7.3",
  "license": "Apache-2.0"
}
```

**tsconfig.json**:
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020", "DOM"],
    "outDir": "./dist",
    "rootDir": "./public/js",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true
  },
  "include": ["public/js/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

---

## 8. ì˜ì¡´ì„± ì „ì²´ ëª©ë¡

### 8.1 í”„ë¡œë•ì…˜ ì˜ì¡´ì„± (34ê°œ)

```json
{
  "dependencies": {
    "@anthropic-ai/sdk": "^0.30.1",
    "@langchain/anthropic": "^0.3.7",
    "@langchain/community": "^0.3.17",
    "@langchain/openai": "^0.3.14",
    "@supabase/supabase-js": "^2.58.0",
    "archiver": "^7.0.1",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "dotenv": "^16.4.7",
    "express": "^4.18.2",
    "helmet": "^7.0.0",
    "highlight.js": "^11.11.1",
    "jsdom": "^26.1.0",
    "langchain": "^0.3.7",
    "marked": "^15.0.12",
    "multer": "^2.0.2",
    "openai": "^4.71.1",
    "socket.io": "^4.7.2",
    // ... 16ê°œ ë”
  }
}
```

### 8.2 ê°œë°œ ì˜ì¡´ì„± (10ê°œ)

```json
{
  "devDependencies": {
    "@types/node": "^22.10.5",
    "nodemon": "^3.1.9",
    "typescript": "^5.7.3",
    // ... 7ê°œ ë”
  }
}
```

---

**ë¬¸ì„œ ë**

ë‹¤ìŒ ë¬¸ì„œ: [03_AI_ì‹œìŠ¤í…œ_ìƒì„¸ë¶„ì„.md](./03_AI_ì‹œìŠ¤í…œ_ìƒì„¸ë¶„ì„.md)
